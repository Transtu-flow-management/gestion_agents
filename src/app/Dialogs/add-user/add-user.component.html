<mat-dialog-content >
<div class="flex absolute top-0 right-0 h-16 w-16 overflow-y-auto">
  <p class="text-xs text-primary-700"></p>
  <button type="button" id="dismissButton"
    class="ml-2 box-content rounded-none border-none opacity-80 hover:no-underline hover:opacity-75 focus:opacity-100 focus:shadow-none focus:outline-none"
    data-te-toast-dismiss (click)="close()" aria-label="Close">
    <span (click)="dismissdialog()"
      class="w-[1em] focus:opacity-100 disabled:pointer-events-none disabled:select-none disabled:opacity-25 [&.disabled]:pointer-events-none [&.disabled]:select-none [&.disabled]:opacity-25">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="h-6 w-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </span>
  </button>
</div>
<div class="max-w-2xl mx-auto">
  <p
    class="text-4xl not-italic font-sans font-bold tracking-wide text-justify dark:text-[#111827] capitalize pb-16 pt-10">
    Ajouter un Agent</p>
  <form [formGroup]="addForm">
    <div class="flex flex-wrap  space-y-2">
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Nom
          </label>
          <input type="text" formControlName="name"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="votre nom">
        </div>
        <ng-container>
          <div class="mb-8" *ngIf="isFormSubmitted && addForm.get('name').errors?.['required']  && addForm.get('name')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('name').errors?.['minlength']  && addForm.get('name').invalid && addForm.get('name')"
            class="text-red-500 text-xs italic">le nom doit contient minimum 3 lettres</div>
        </ng-container>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Prenom
          </label>
          <input type="text" formControlName="surname"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="votre prenom">
        </div>
        <ng-container>
          <div class="mb-8"
            *ngIf="isFormSubmitted && addForm.get('surname').errors?.['required']  && addForm.get('surname')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('surname').errors?.['minlength']  && addForm.get('surname').invalid && addForm.get('surname')"
            class="text-red-500 text-xs italic">le nom doit contient minimum 3 lettres</div>
        </ng-container>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Numero
          </label>
          <input type="text" formControlName="phone"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="votre numero">
        </div>
        <ng-container>
          <div class="mb-8"
            *ngIf="isFormSubmitted && addForm.get('phone').errors?.['required']  && addForm.get('phone')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('phone').errors?.['minlength']  && addForm.get('phone').invalid && addForm.get('phone')"
            class="text-red-500 text-xs italic">le numero doit etre de 8 chiffres au minimum</div>
        </ng-container>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Adresse E-mail transtu
          </label>
          <input type="email" formControlName="username"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="email Transtu">
        </div>
        <ng-container>
          <div class="mb-8"
            *ngIf="isFormSubmitted && addForm.get('username').errors?.['required']  && addForm.get('username')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('username').errors?.['email']  && addForm.get('username').invalid && addForm.get('username')"
            class="text-red-500 text-xs italic">l'adresse mail doit etre valide</div>
            <div
            *ngIf="isFormSubmitted && addForm.get('username').hasError('invalidEmail') && addForm.get('username')"
            class="text-red-500 text-xs italic">l'adresse mail doit fini par @transtu.tn</div>
        </ng-container>
      </div>
      <div class="w-full lg:w-12/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Addresse
          </label>
          <input type="text" formControlName="address"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="votre adresse">
        </div>
        <ng-container>
          <div class="mb-8"
            *ngIf="isFormSubmitted && addForm.get('address').errors?.['required']  && addForm.get('address')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('address').errors?.['minLength']  && addForm.get('address').invalid && addForm.get('address')"
            class="text-red-500 text-xs italic">l'adresse ne doit pas etre court</div>
        </ng-container>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3 ">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Date de naissance
          </label>
            <input matInput formControlName="dateOfBirth" [matDatepicker]="picker" placeholder="date de naissance">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
           
            <mat-datepicker #picker></mat-datepicker>
        </div>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Mot de Passe
          </label>
          <input type="password" formControlName="password"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="votre Mot de passe" required>
        </div>
        <ng-container>
          <div class="mb-8"
            *ngIf="isFormSubmitted && addForm.get('password').errors?.['required']  && addForm.get('password')"
            class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
          <div
            *ngIf="isFormSubmitted && addForm.get('password').errors?.['minlength']  && addForm.get('password').invalid && addForm.get('password')"
            class="text-red-500 text-xs italic">le mot de passe doit etre de taille minimum de 8 caractères </div>
          <div *ngIf="isFormSubmitted && addForm.get('password').hasError('passwordValidator')"
            class="text-red-500 text-xs italic">
            Le mot de passe doit contenir un symbole.
          </div>
        </ng-container>
      </div>
      <div class="w-full lg:w-6/12 px-4">
        <div class="relative w-full mb-3">
          <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2">
            Confirmer le mot de passe
          </label>
          <input type="password" formControlName="con_password"
            class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-stone-200 rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
            placeholder="Confirmation" required>

          <ng-container>
            <div class="mb-8"
              *ngIf="isFormSubmitted && addForm.get('con_password').errors?.['required']  && addForm.get('con_password')"
              class="text-red-500 text-xs italic">Veillez verifier que le champ non vide </div>
            <div *ngIf="addForm.hasError('passwordMismatch') && addForm.get('con_password').touched"
              class="text-red-500 text-xs italic">
              Password Missmatch
            </div>
          </ng-container>
        </div>

      </div>
    </div>
    <hr class="mt-6 border-b-1 border-blueGray-300">
    <div class="relative flex items-center mt-4">
      <input
        class="relative float-left ml-[1.5rem] mr-[6px] mt-[0.15rem] h-[1.125rem] w-[1.125rem] appearance-none rounded-[0.25rem] border-[0.125rem] border-solid border-red-300 outline-none before:pointer-events-none before:absolute before:h-[0.875rem] before:w-[0.875rem] before:scale-0 before:rounded-full before:bg-transparent before:opacity-0 before:shadow-[0px_0px_0px_13px_transparent] before:content-[''] checked:border-primary checked:bg-primary checked:before:opacity-[0.16] checked:after:absolute checked:after:-mt-px checked:after:ml-[0.25rem] checked:after:block checked:after:h-[0.8125rem] checked:after:w-[0.375rem] checked:after:rotate-45 checked:after:border-[0.125rem] checked:after:border-l-0 checked:after:border-t-0 checked:after:border-solid checked:after:border-black checked:after:bg-transparent checked:after:content-[''] hover:cursor-pointer hover:before:opacity-[0.04] hover:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:shadow-none focus:transition-[border-color_0.2s] focus:before:scale-100 focus:before:opacity-[0.12] focus:before:shadow-[0px_0px_0px_13px_rgba(0,0,0,0.6)] focus:before:transition-[box-shadow_0.2s,transform_0.2s] focus:after:absolute focus:after:z-[1] focus:after:block focus:after:h-[0.875rem] focus:after:w-[0.875rem] focus:after:rounded-[0.125rem] focus:after:content-[''] checked:focus:before:scale-100 checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca] checked:focus:before:transition-[box-shadow_0.2s,transform_0.2s] checked:focus:after:-mt-px checked:focus:after:ml-[0.25rem] checked:focus:after:h-[0.8125rem] checked:focus:after:w-[0.375rem] checked:focus:after:rotate-45 checked:focus:after:rounded-none checked:focus:after:border-[0.125rem] checked:focus:after:border-l-0 checked:focus:after:border-t-0 checked:focus:after:border-solid checked:focus:after:border-black checked:focus:after:bg-transparent dark:border-neutral-600 dark:checked:border-primary dark:checked:bg-primary dark:focus:before:shadow-[0px_0px_0px_13px_rgba(255,255,255,0.4)] dark:checked:focus:before:shadow-[0px_0px_0px_13px_#3b71ca]"
        type="checkbox" formControlName="checked"
        value=""
        id="checkboxDefault" />
      <label
        class="inline-block pl-[0.15rem] hover:cursor-pointer"
        for="checkboxDefault">
       Attribuer à un dépôt?
      </label>
    </div>
    <div class="my-4 mb-2"> <!-- Add spacing here -->
      <div [@fadeInOut] *ngIf="addForm.get('checked').value" class="relative h-10 w-auto min-w-[200px]" >
        <select formControlName="depot"
        class="peer h-full w-full rounded-[16px] border border-zinc-700 border-t-transparent bg-transparent px-3 py-2.5 font-sans text-sm font-normal text-blue-gray-700 outline outline-0 transition-all placeholder-shown:border placeholder-shown:border-blue-gray-200 placeholder-shown:border-t-blue-gray-200 focus:border-2 focus:border-pink-500 focus:border-t-transparent focus:outline-0 disabled:border-0 disabled:bg-blue-gray-50">
        <option  [value]="" disabled>Select</option>
          <option *ngFor="let depot of warehouse" [value]="depot.id">{{depot.name}}</option>
        </select>
        <label
          class=" before:content[' '] after:content[' '] pointer-events-none absolute left-0 -top-1 flex h-full w-full select-none text-[13px] font-normal leading-tight text-blue-gray-400 transition-all before:pointer-events-none before:mt-[6.5px] before:mr-1 before:box-border before:block before:h-1.5 before:w-2.5 before:rounded-tl-md before:border-t before:border-l before:border-blue-gray-200 before:transition-all after:pointer-events-none after:mt-[6.5px] after:ml-1 after:box-border after:block after:h-1.5 after:w-2.5 after:flex-grow after:rounded-tr-md after:border-t after:border-r after:border-blue-gray-200 after:transition-all peer-placeholder-shown:text-sm peer-placeholder-shown:leading-[3.75] peer-placeholder-shown:text-blue-gray-500 peer-placeholder-shown:before:border-transparent peer-placeholder-shown:after:border-transparent peer-focus:text-[11px] peer-focus:leading-tight peer-focus:text-pink-500 peer-focus:before:border-t-2 peer-focus:before:border-l-2 peer-focus:before:border-pink-500 peer-focus:after:border-t-2 peer-focus:after:border-r-2 peer-focus:after:border-pink-500 peer-disabled:text-transparent peer-disabled:before:border-transparent peer-disabled:after:border-transparent peer-disabled:peer-placeholder-shown:text-blue-gray-500">
          Selectionner le dépot
        </label>
      </div>
      <ng-container>
        <div
          *ngIf="isFormSubmitted && addForm.get('depot').hasError('requiredOption')"
          class="text-red-500 text-xs italic">veuillez choisissez le dépot </div>
        
      </ng-container>
    </div>
    <hr class="mt-6 border-b-1 border-blueGray-300">
    <p class="text-yellow-600 text-sm mt-3 mb-6 font-bold uppercase">
      inserer une image
    </p>
    <div class="flex flex-wrap">
      <div class="w-full lg:w-12/12 px-4">
        <input type="file" (change)="onfileRead($event)" (change)="onFileChange($event)"
          class="file:bg-gradient-to-b file:from-[#F8AF26] file:no-[#F8AE10] file:px-10 file:py-1 file:m-2 file:border-none file:rounded-full bg-gradient-to-br from-[##EEEEEE] to-[##EEEEFF] text-gray-800 font-mono rounded-full cursor-pointer shadow-xl shadow-gray-700/60">
      </div>
      <div *ngIf="selectedfile.length > 0" class="text-red-500 text-xs italic">
        <p class="text-gray-600 text-sm pt-16 font-bold uppercase">
          Preview:
        </p>
        <div class="rounded-full overflow-hidden w-32 h-32 mb-4 ml-20">
          <img [src]="selectedfile" alt="Selected Image" class="object-cover w-full h-full">
        </div>
      </div>
    </div>
  </form>
  <button class="text-black-100 font-medium mb-8 mt-8 bg-[#F8AF26] hover:shadow-2xl hover:bg-amber-700 focus:ring-4 focus:ring-amber-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 
center " (click)="addUser()">ajouter
  </button>
</div>
</mat-dialog-content>